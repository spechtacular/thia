{% extends "base.html" %}
{% block title %}Set New Password{% endblock %}

{% block content %}
<div class="auth-page">
  <div class="auth-card">
    {% if validlink %}
      <h1>Set a new password</h1>
      <form method="post" novalidate class="auth-form">
        {% csrf_token %}
        {% if form.non_field_errors %}<div class="auth-errors">{{ form.non_field_errors }}</div>{% endif %}

        <label for="{{ form.new_password1.id_for_label }}">New password</label>
        {{ form.new_password1.errors }}
        {{ form.new_password1 }}

        <label for="{{ form.new_password2.id_for_label }}">Confirm new password</label>
        {{ form.new_password2.errors }}
        {{ form.new_password2 }}

        <button type="submit" class="auth-btn">Change Password</button>
      </form>
      <div class="auth-links"><a href="{% url 'login' %}">Back to login</a></div>
    {% else %}
      <h1>Invalid or expired link</h1>
      <p>Please request a new password reset.</p>
      <div class="auth-links"><a href="{% url 'password_reset' %}">Request reset again</a></div>
    {% endif %}
  </div>
</div>
{% endblock %}
